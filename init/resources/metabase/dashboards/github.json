{
  "name": "GitHub Dashboard",
  "cards": [
    {
      "name": "PRs Opened",
      "description": null,
      "display": "scalar",
      "table_id": {{ table "vcs_PullRequest" }},
      "dataset_query": {
        "query": {
          "source-table": {{ table "vcs_PullRequest" }},
          "aggregation": [
            [
              "count"
            ]
          ]
        },
        "type": "query"
      },
      "visualization_settings": {
        "table.pivot_column": "stateDetail",
        "table.cell_column": "count"
      }
    },
    {
      "name": "PRs Closed",
      "description": null,
      "display": "scalar",
      "table_id": {{ table "vcs_PullRequest" }},
      "dataset_query": {
        "query": {
          "source-table": {{ table "vcs_PullRequest" }},
          "aggregation": [
            [
              "count"
            ]
          ],
          "filter": [
            "and",
            [
              "=",
              [
                "field",
                {{ field "vcs_PullRequest.stateDetail" }},
                null
              ],
              "closed"
            ],
            [
              "is-null",
              [
                "field",
                {{ field "vcs_PullRequest.mergedAt" }},
                null
              ]
            ]
          ]
        },
        "type": "query"
      },
      "visualization_settings": {
        "table.pivot_column": "stateDetail",
        "table.cell_column": "count"
      }
    },
    {
      "name": "PRs Merged",
      "description": null,
      "display": "scalar",
      "table_id": {{ table "vcs_PullRequest" }},
      "dataset_query": {
        "query": {
          "source-table": {{ table "vcs_PullRequest" }},
          "aggregation": [
            [
              "count"
            ]
          ],
          "filter": [
            "not-null",
            [
              "field",
              {{ field "vcs_PullRequest.mergedAt" }},
              null
            ]
          ]
        },
        "type": "query"
      },
      "visualization_settings": {
        "table.pivot_column": "stateDetail",
        "table.cell_column": "count"
      }
    },
    {
      "name": "PRs Opened by Week",
      "description": null,
      "display": "line",
      "table_id": {{ table "vcs_PullRequest" }},
      "dataset_query": {
        "type": "query",
        "query": {
          "source-table": {{ table "vcs_PullRequest" }},
          "breakout": [
            [
              "field",
              {{ field "vcs_PullRequest.createdAt" }},
              {
                "temporal-unit": "week"
              }
            ]
          ],
          "aggregation": [
            [
              "count"
            ]
          ]
        }
      },
      "visualization_settings": {
        "graph.dimensions": [
          "createdAt"
        ],
        "graph.metrics": [
          "count"
        ]
      }
    },
    {
      "name": "PRs Merged by Week",
      "description": null,
      "display": "line",
      "dataset_query": {
        "type": "query",
        "query": {
          "source-table": {{ table "vcs_PullRequest" }},
          "filter": [
            "not-null",
            [
              "field",
              {{ field "vcs_PullRequest.mergedAt" }},
              null
            ]
          ],
          "aggregation": [
            [
              "count"
            ]
          ],
          "breakout": [
            [
              "field",
              {{ field "vcs_PullRequest.mergedAt" }},
              {
                "temporal-unit": "week"
              }
            ]
          ]
        }
      },
      "visualization_settings": {
        "graph.dimensions": [
          "mergedAt"
        ],
        "graph.metrics": [
          "count"
        ]
      }
    },
    {
      "name": "Issues Created by Week",
      "description": null,
      "display": "line",
      "dataset_query": {
        "query": {
          "source-table": {{ table "tms_Task" }},
          "aggregation": [
            [
              "count"
            ]
          ],
          "breakout": [
            [
              "field",
              {{ field "tms_Task.createdAt" }},
              {
                "temporal-unit": "week"
              }
            ]
          ],
          "joins": [
            {
              "fields": "all",
              "source-table": {{ table "tms_TaskBoardRelationship" }},
              "condition": [
                "=",
                [
                  "field",
                  {{ field "tms_Task.id" }},
                  null
                ],
                [
                  "field",
                  {{ field "tms_TaskBoardRelationship.task" }},
                  {
                    "join-alias": "Tms TaskBoardRelationship"
                  }
                ]
              ],
              "alias": "Tms TaskBoardRelationship"
            }
          ]
        },
        "type": "query"
      },
      "visualization_settings": {
        "graph.dimensions": [
          "createdAt"
        ],
        "graph.metrics": [
          "count"
        ]
      }
    },
    {
      "name": "Issues Closed by Week",
      "description": null,
      "display": "line",
      "dataset_query": {
        "type": "query",
        "query": {
          "source-table": {{ table "tms_Task" }},
          "aggregation": [
            [
              "count"
            ]
          ],
          "breakout": [
            [
              "field",
              {{ field "tms_Task.updatedAt" }},
              {
                "temporal-unit": "week"
              }
            ]
          ],
          "filter": [
            "=",
            [
              "field",
              {{ field "tms_Task.statusDetail" }},
              null
            ],
            "closed"
          ],
          "joins": [
            {
              "fields": "all",
              "source-table": {{ table "tms_TaskBoardRelationship" }},
              "condition": [
                "=",
                [
                  "field",
                  {{ field "tms_Task.id" }},
                  null
                ],
                [
                  "field",
                  {{ field "tms_TaskBoardRelationship.task" }},
                  {
                    "join-alias": "Tms TaskBoardRelationship"
                  }
                ]
              ],
              "alias": "Tms TaskBoardRelationship"
            }
          ]
        }
      },
      "visualization_settings": {
        "graph.dimensions": [
          "updatedAt"
        ],
        "graph.metrics": [
          "count"
        ]
      }
    },
    {
      "name": "Tasks Created",
      "description": null,
      "display": "scalar",
      "table_id": {{ table "tms_Task" }},
      "dataset_query": {
        "type": "query",
        "query": {
          "source-table": {{ table "tms_Task" }},
          "aggregation": [
            [
              "count"
            ]
          ],
          "joins": [
            {
              "fields": "all",
              "source-table": {{ table "tms_TaskBoardRelationship" }},
              "condition": [
                "=",
                [
                  "field",
                  {{ field "tms_Task.id" }},
                  null
                ],
                [
                  "field",
                  {{ field "tms_TaskBoardRelationship.task" }},
                  {
                    "join-alias": "Tms TaskBoardRelationship"
                  }
                ]
              ],
              "alias": "Tms TaskBoardRelationship"
            }
          ]
        }
      },
      "visualization_settings": {}
    },
    {
      "name": "Tasks Closed",
      "description": null,
      "display": "scalar",
      "table_id": {{ table "tms_Task" }},
      "dataset_query": {
        "type": "query",
        "query": {
          "source-table": {{ table "tms_Task" }},
          "aggregation": [
            [
              "count"
            ]
          ],
          "joins": [
            {
              "fields": "all",
              "source-table": {{ table "tms_TaskBoardRelationship" }},
              "condition": [
                "=",
                [
                  "field",
                  {{ field "tms_Task.id" }},
                  null
                ],
                [
                  "field",
                  {{ field "tms_TaskBoardRelationship.task" }},
                  {
                    "join-alias": "Tms TaskBoardRelationship"
                  }
                ]
              ],
              "alias": "Tms TaskBoardRelationship"
            }
          ],
          "filter": [
            "=",
            [
              "field",
              {{ field "tms_Task.statusDetail" }},
              null
            ],
            "closed"
          ]
        }
      },
      "visualization_settings": {}
    },
    {
      "name": "PR Cycle Time",
      "description": null,
      "display": "gauge",
      "table_id": null,
      "dataset_query": {
        "type": "native",
        "native": {
          "query": "SELECT EXTRACT(epoch FROM (\nSELECT \n    justify_interval(\n      avg(\n        \"vcs_PullRequest\".\"mergedAt\" - \"vcs_PullRequest\".\"createdAt\"\n      )\n    ) as cycle_time \n  FROM \n    \"vcs_PullRequest\" \n  WHERE \n    \"vcs_PullRequest\".\"mergedAt\" IS NOT NULL \n) / 3600 / 24)",
          "template-tags": {}
        }
      },
      "visualization_settings": {
        "gauge.segments": [
          {
            "min": 3,
            "max": 10,
            "color": "#ED6E6E",
            "label": ""
          },
          {
            "min": 1,
            "max": 3,
            "color": "#F9CF48",
            "label": ""
          },
          {
            "min": 0,
            "max": 1,
            "color": "#84BB4C",
            "label": ""
          }
        ],
        "column_settings": {
          "[\"name\",\"date_part\"]": {
            "suffix": " days"
          }
        }
      }
    },
    {
      "name": "Reviews Distribution",
      "description": null,
      "display": "pie",
      "table_id": {{ table "vcs_PullRequestReview" }},
      "dataset_query": {
        "query": {
          "source-query": {
            "source-table": {{ table "vcs_PullRequestReview" }},
            "aggregation": [
              [
                "aggregation-options",
                [
                  "count"
                ],
                {
                  "name": "Numbers of Reviews",
                  "display-name": "Numbers of Reviews"
                }
              ]
            ],
            "joins": [
              {
                "fields": "all",
                "strategy": "full-join",
                "source-table": {{ table "vcs_PullRequest" }},
                "condition": [
                  "=",
                  [
                    "field",
                    {{ field "vcs_PullRequestReview.pullRequest" }},
                    null
                  ],
                  [
                    "field",
                    {{ field "vcs_PullRequest.id" }},
                    {
                      "join-alias": "Vcs PullRequest - PullRequest"
                    }
                  ]
                ],
                "alias": "Vcs PullRequest - PullRequest"
              }
            ],
            "breakout": [
              [
                "field",
                {{ field "vcs_PullRequest.uid" }},
                {
                  "join-alias": "Vcs PullRequest - PullRequest"
                }
              ]
            ]
          },
          "aggregation": [
            [
              "count"
            ]
          ],
          "breakout": [
            [
              "field",
              "Numbers of Reviews",
              {
                "base-type": "type/Integer"
              }
            ]
          ]
        },
        "type": "query"
      },
      "visualization_settings": {
        "pie.show_legend": true,
        "column_settings": {
          "[\"name\",\"Numbers of Reviews\"]": {
            "suffix": ""
          }
        }
      }
    },
    {
      "name": "Top 5 Contributors",
      "description": null,
      "display": "row",
      "table_id": {{ table "vcs_PullRequest" }},
      "dataset_query": {
        "query": {
          "source-table": {{ table "vcs_PullRequest" }},
          "aggregation": [
            [
              "count"
            ]
          ],
          "breakout": [
            [
              "field",
              {{ field "vcs_User.name" }},
              {
                "source-field": {{ field "vcs_PullRequest.author" }}
              }
            ]
          ],
          "limit": 5,
          "order-by": [
            [
              "desc",
              [
                "aggregation",
                0
              ]
            ]
          ]
        },
        "type": "query"
      },
      "visualization_settings": {
        "graph.dimensions": [
          "name"
        ],
        "graph.metrics": [
          "count"
        ]
      }
    }
  ],
  "parameters": [],
  "layout": [
    {
      "row": 3,
      "col": 12,
      "sizeX": 3,
      "sizeY": 3,
      "card_id": {{ card "PRs Opened" }},
      "series": [],
      "parameter_mappings": [],
      "visualization_settings": {}
    },
    {
      "row": 3,
      "col": 15,
      "sizeX": 3,
      "sizeY": 3,
      "card_id": {{ card "PRs Closed" }},
      "series": [],
      "parameter_mappings": [],
      "visualization_settings": {}
    },
    {
      "row": 0,
      "col": 12,
      "sizeX": 6,
      "sizeY": 3,
      "card_id": {{ card "PRs Merged" }},
      "series": [],
      "parameter_mappings": [],
      "visualization_settings": {}
    },
    {
      "row": 4,
      "col": 0,
      "sizeX": 12,
      "sizeY": 5,
      "card_id": {{ card "PRs Opened by Week" }},
      "series": [
        {
          "id": {{ card "PRs Merged by Week" }}
        },
        {
          "id": {{ card "Issues Created by Week" }}
        },
        {
          "id": {{ card "Issues Closed by Week" }}
        }
      ],
      "parameter_mappings": [],
      "visualization_settings": {}
    },
    {
      "row": 6,
      "col": 12,
      "sizeX": 3,
      "sizeY": 3,
      "card_id": {{ card "Tasks Created" }},
      "series": [],
      "parameter_mappings": [],
      "visualization_settings": {}
    },
    {
      "row": 6,
      "col": 15,
      "sizeX": 3,
      "sizeY": 3,
      "card_id": {{ card "Tasks Closed" }},
      "series": [],
      "parameter_mappings": [],
      "visualization_settings": {}
    },
    {
      "row": 0,
      "col": 0,
      "sizeX": 4,
      "sizeY": 4,
      "card_id": {{ card "PR Cycle Time" }},
      "series": [],
      "parameter_mappings": [],
      "visualization_settings": {}
    },
    {
      "row": 0,
      "col": 4,
      "sizeX": 4,
      "sizeY": 4,
      "card_id": {{ card "Reviews Distribution" }},
      "series": [],
      "parameter_mappings": [],
      "visualization_settings": {}
    },
    {
      "row": 0,
      "col": 8,
      "sizeX": 4,
      "sizeY": 4,
      "card_id": {{ card "Top 5 Contributors" }},
      "series": [],
      "parameter_mappings": [],
      "visualization_settings": {}
    }
  ],
  "path": "/Faros CE/GitHub",
  "priority": 5
}

